version: '3'

services:
  express-server:
    image: 'express-server'
    build: .
    environment:
      NODE_ENV: 'production'
      DB_URL: 'wish-collector-db/Database'
      PORT: '80'
    ports:
      - '80:80'
  mongo-db:
    image: 'mongo'
    container_name: 'wish-collector-db'
    environment:
      - MONGODB_INITDB_DATABASE=wishcollector
      - MONGODB_INITDB_ROOT_USERNAME=nsadmin
      - MONGODB_INITdb_ROOT_PASSWORD=ninestack!23
    volumes:
      - ./mongo-init.js:/docker-entrypoint-initdb.d/mongo-init.js:ro
      - ./mongo-volume:/data/db
    ports:
      - '27017-2019:27017-2019'
